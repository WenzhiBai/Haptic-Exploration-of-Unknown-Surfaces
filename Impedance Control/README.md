# Impedance Control


## 1. Environment

```
Mujoco 3.2.3
ros2-humble
```

## 2. Package Description

* Contains two packages: `mujoco_ros2_control` and `mujoco_ros2_control_demos`. 

* The main control algorithm is implemented in `mujoco_ros2_control_demos`, and `mujoco_ros2_control_demos` depends on `mujoco_ros2_control`.

* The main impedance control algorithm is implemented in ：`mujoco_ros2_control_demos/example/fr3_impedance_controller.cpp`.

## 3. How to Launch the Controller

1. **Run Directly**

```python
colcon build
source install/setup.bash
ros2 launch mujoco_ros2_control_demos fr3_demo.launch.py
```

2. **Launch Using Standardized Scripts**

```
colcon build
./run_fr3_demo.sh
```

## 4.Pointcould visualize

### file：

* `plot_pointcloud.py`  View of Point Cloud

- `scan_pointcloud.csv` - scan data file（generated by controller）

### how to use

```python
cd mujoco_ros2_control_demos/point_cloud
python3 plot_pointcloud.py
```

## 5. Reconstruction

### file：

* `reconstructed_surface_poisson.obj`  reconstruction_result
* `reconstructed_surface_poisson.ply`  reconstruction_result

### how to use

```python
cd mujoco_ros2_control_demos/reconstruction
python3 reconstruct_surface_improved.py
```

## 6. Exception Handling

If the  robot fails to maintain initial stability after launching the  controller, it is highly likely that some dependency libraries were not  loaded correctly. Please check your environment variables.

```
echo $ROS_DISTRO
echo $MUJOCO_DIR
echo $LD_LIBRARY_PATH
```

